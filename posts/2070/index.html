<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>主题和hexo升级 │ Y.K.'s BLOG</title><link rel="stylesheet" href="/css/oasis.css"><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="Y.K.'s BLOG" type="application/atom+xml">
</head><body><div id="content"><h1 id="title">主题和hexo升级</h1><div id="menu-outer"><nav id="menu-inner"><a id="menu-back" href="javascript:history.back()">Back</a><time datetime="2021-01-13T18:58:50.000Z">2021-01-13</time></nav></div><div id="content-outer"><div id="content-inner"><article id="post"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;昨天浏览，发现了几个很不错的hexo主题，想更换一下，结果发现自己的hexo和next版本已经非常老旧，遂先更新这两个版本，再更新版本过程中也遇到不少难题，总结一下。  </p>
<span id="more"></span>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先是不能直接用npm update的方法升级hexo，因为这种方法只能一个大版本内升级，从4.0.0升级到5.0.0需要在根目录的package.json文件中自行修改，再用命令更新，期间可以用npm outdated查看哪些插件需要更新。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hexo升级完了，next的更新也比较麻烦，从next6.0开始不仅源码换了仓库，管理的人也换了，导致主题需要重新部署，原来的那些个性化设置都要重新开启，好在新版的next集成了很多功能，不需要额外设置了，可以直接在主题配置文件中进行修改；其中需要注意的是 busuanzi和live2d挂件存在冲突，需要取消live2d，busuanzi才能继续工作。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;更新完之后，明显感觉到部署的速度提高了，而且也有了很多新特行，比如mac的代码行，黑暗主题等；<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;例如设置博客永久链接的代码，需要添加到博客的根目录中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">permalink: posts/:abbrlink.html  # 此处可以自己设置，也可以直接使用 /:abbrlink  posts也可改也可以去掉</span><br><span class="line">abbrlink:`</span><br><span class="line">    alg: crc32   #算法： crc16(default) and crc32</span><br><span class="line">    rep: hex     #进制： dec(default) and hex</span><br></pre></td></tr></table></figure>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;链接的插入显示效果：<a href="https://silkiller.github.io/">白日梦想家-Young</a>  </p>
<div class="post-tags"><a class="post-tag-link" href="/tags/hexo/" rel="tag">#hexo</a>, <a class="post-tag-link" href="/tags/next/" rel="tag">#next</a>, <a class="post-tag-link" href="/tags/%E5%8D%87%E7%BA%A7/" rel="tag">#升级</a></div></article><div id="paginator"></div></div></div><div id="bottom-outer"><div id="bottom-inner"><hr><div><div><a>2025@ </a><a href="/atom.xml"><img src="/assets/rss.png"></a></div><div id="hexo"><a>Powered by&nbsp</a><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><a>&nbsp&&nbsp</a><a target="_blank" rel="noopener" href="https://github.com/qiantao94/hexo-theme-oasis">Oasis</a></div></div></div></div></div></body><script src="/js/oasis.js"></script></html>